<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RMNCAH</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Tailwind CSS (with custom config using inline script) -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#1e40af',   // Custom Blue
                        secondary: '#f59e0b', // Custom Amber
                        accent: '#10b981',    // Custom Green
                        dark: '#1f2937',      // Gray-800
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="styles/main.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tw-elements/css/tw-elements.min.css" />
    <script src="styles/main.js"></script>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
        integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200;300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.css" rel="stylesheet" />
    <!-- Alpine.js -->
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <!-- Leaflet JS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha384-sA+RlRzF8YK8EeQx09sEtc06CXi1K06oBJJSM6Ox9B8JeN5aZzffR28E/zTGmLXN" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha384-O3FJxqIQW2STXQKKFePx5FKP8uXpTYBJ+Al9VwZpyaXx1V4u1ZbE1cBGTSrBocjz" crossorigin=""></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <!-- Optional: Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tw-elements/css/tw-elements.min.css" />
    <style>
        .fade-slide-enter {
            opacity: 0;
            transform: translateY(20px);
        }

        .fade-slide-enter-active {
            opacity: 1;
            transform: translateY(0);
            transition: all 0.4s ease;
        }

        .fade-slide-leave {
            opacity: 1;
            transform: translateY(0);
        }

        .fade-slide-leave-active {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease;
        }
    </style>

</head>

<body class="text-gray-800 ">
    <nav x-data="{ open: false }"
        class="fixed z-50 border shadow-sm bg-white/70 top-4 left-4 right-4 backdrop-blur-md border-white/10 rounded-xl">
        <div class="flex items-center justify-between px-6 py-4">
            <!-- Logo -->
            <a href="/" class="flex items-center space-x-2 text-2xl font-bold text-black uppercase">
                <img src="/resources/gov.png" class="object-contain h-12" alt="Site Logo">
            </a>

            <!-- Mobile Menu Toggle -->
            <button @click="open = !open" class="text-xl lg:hidden focus:outline-none">
                <i class="fas fa-bars" x-show="!open"></i>
                <i class="fas fa-times" x-show="open" x-cloak></i>
            </button>

            <!-- Nav Links - Desktop -->
            <ul class="items-center hidden space-x-8 text-sm font-medium text-gray-700 lg:flex">
                <li>
                    <a href="/" class="uppercase transition hover:text-blue-600">
                        Home
                    </a>
                </li>
                <li>
                    <a href="/about" class="uppercase transition hover:text-blue-600">
                        Programs
                    </a>
                </li>

                <!-- Pages Dropdown Trigger -->
                <li class="relative" x-data="{ showDropdown: false }">
                    <button @click="showDropdown = !showDropdown"
                        class="inline-flex items-center font-medium uppercase transition focus:outline-none">
                        Stakeholder <i class="ml-2 fal fa-chevron-down"></i>
                    </button>

                    <!-- Dropdown Content -->
                    <div x-show="showDropdown" @click.outside="showDropdown = false" x-transition
                        class="absolute z-50 w-56 mt-2 bg-white divide-y divide-gray-100 shadow-md rounded-xl"
                        style="display: none;">
                        <ul class="py-2 text-sm text-left text-blue-800">
                            <li class="px-4 py-2 transition hover:bg-blue-100">
                                <a href="access.html">Login / Registration</a>
                            </li>
                            <li class="px-4 py-2 transition hover:bg-blue-100">
                                <a href="Stakeholders/dashboard.html">Dashboard</a>
                            </li>
                        </ul>
                    </div>
                </li>
                <!-- Pages Dropdown Trigger -->
                <li class="relative" x-data="{ showDropdown: false }">
                    <button @click="showDropdown = !showDropdown"
                        class="inline-flex items-center font-medium uppercase transition focus:outline-none">
                        Admin <i class="ml-2 fal fa-chevron-down"></i>
                    </button>

                    <!-- Dropdown Content -->
                    <div x-show="showDropdown" @click.outside="showDropdown = false" x-transition
                        class="absolute z-50 w-56 mt-2 bg-white divide-y divide-gray-100 shadow-md rounded-xl"
                        style="display: none;">
                        <ul class="py-2 text-sm text-left text-blue-800">
                            <li class="px-4 py-2 transition hover:bg-blue-100">
                                <a href="dashboard.html">Dashboard</a>
                            </li>
                        </ul>
                    </div>
                </li>
                <!-- Pages Dropdown Trigger -->
                <li class="relative" x-data="{ showDropdown: false }">
                    <button @click="showDropdown = !showDropdown"
                        class="inline-flex items-center font-medium uppercase transition focus:outline-none">
                        Donor <i class="ml-2 fal fa-chevron-down"></i>
                    </button>

                    <!-- Dropdown Content -->
                    <div x-show="showDropdown" @click.outside="showDropdown = false" x-transition
                        class="absolute z-50 w-56 mt-2 bg-white divide-y divide-gray-100 shadow-md rounded-xl"
                        style="display: none;">
                        <ul class="py-2 text-sm text-left text-blue-800">
                            <li class="px-4 py-2 transition hover:bg-blue-100">
                                <a href="index.html">Index</a>
                            </li>
                            <li class="px-4 py-2 transition hover:bg-blue-100">
                                <a href="access.html">Login / Registration</a>
                            </li>
                            <li class="px-4 py-2 transition hover:bg-blue-100">
                                <a href="dashboard.html">Dashboard</a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li>
                    <a href="/contact" class="font-bold text-blue-700 uppercase hover:text-pink-500">
                        Announcements
                    </a>
                </li>
            </ul>
        </div>

        <!-- Nav Links - Mobile -->
        <div x-show="open" x-transition:enter="transition ease-out duration-200"
            x-transition:enter-start="opacity-0 transform -translate-y-2"
            x-transition:enter-end="opacity-100 transform translate-y-0"
            x-transition:leave="transition ease-in duration-150"
            x-transition:leave-start="opacity-100 transform translate-y-0"
            x-transition:leave-end="opacity-0 transform -translate-y-2" class="px-6 pb-6 lg:hidden">

            <ul class="flex flex-col space-y-4 font-semibold text-gray-700">
                <li><a href="/" class="block transition hover:text-blue-600">Home</a></li>
                <li><a href="#about" class="block transition hover:text-blue-600">About</a></li>
                <li><a href="#why-us" class="block transition hover:text-blue-600">Why Us</a></li>
                <li><a href="#contact-us" class="block transition hover:text-blue-600">Contact Us</a></li>
            </ul>

            <!-- CTA Button -->
            <div class="mt-6">
                <a href="/contact"
                    class="relative inline-block w-full px-4 py-2 overflow-hidden font-semibold text-center text-white bg-pink-600 rounded-full group">
                    <span
                        class="absolute inset-0 w-full h-full transition-transform duration-300 ease-out origin-left transform scale-x-0 bg-blue-700 group-hover:scale-x-100"></span>
                    <span class="relative z-10 group-hover:text-white">Collaborate</span>
                </a>
            </div>
        </div>
    </nav>
    <div class="min-h-screen pt-12 bg-gray-100">

        <!-- New Project -->
        <div data-twe-modal-init
            class="fixed left-0 top-0 backdrop-blur-md z-[1055] hidden h-full w-full overflow-y-auto overflow-x-hidden outline-none"
            id="createNewOrganization" tabindex="-1" aria-labelledby="createNewOrganizationTitle" aria-modal="true"
            role="dialog">
            <div data-twe-modal-dialog-ref
                class="pointer-events-none relative flex min-h-[calc(100%-1rem)] w-auto translate-y-[-50px] items-center opacity-0 transition-all duration-300 ease-in-out min-[576px]:mx-auto min-[576px]:mt-7 min-[576px]:max-w-[500px] min-[992px]:max-w-[800px] min-[1200px]:max-w-[1140px]">
                <div
                    class="relative flex flex-col w-full text-current bg-white border-none rounded-md outline-none pointer-events-auto bg-clip-padding shadow-4">
                    <div
                        class="flex items-center justify-between flex-shrink-0 p-4 border-b-2 rounded-t-md border-neutral-100">
                        <!-- Modal title -->
                        <h5 class="text-xl font-medium leading-normal text-surface" id="createNewOrganizationTitle">
                            New Project
                        </h5>
                        <!-- Close button -->
                        <button type="button"
                            class="box-content border-none rounded-none text-neutral-500 hover:text-neutral-800 hover:no-underline focus:text-neutral-800 focus:opacity-100 focus:shadow-none focus:outline-none"
                            data-twe-modal-dismiss aria-label="Close">
                            <span class="[&>svg]:h-6 [&>svg]:w-6">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24"
                                    stroke-width="1.5" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                                </svg>
                            </span>
                        </button>
                    </div>

                    <!-- Modal body -->
                    <div class="relative p-4">
                        <form id="userForm" class="space-y-5">
                            <!-- First & Last Name -->
                            <div class="grid grid-cols-1 gap-4 sm:grid-cols-2">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">First Name</label>
                                    <input type="text" name="first_name" required
                                        class="block w-full py-2 mt-1 border-gray-600 rounded-sm shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">Last Name</label>
                                    <input type="text" name="last_name" required
                                        class="block w-full py-2 mt-1 border-gray-600 rounded-sm shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm">
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700">Gender</label>
                                    <select name="gender" required
                                        class="block w-full py-2 mt-1 border-gray-600 rounded-sm shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm">
                                        <option value="">Select...</option>
                                        <option>Male</option>
                                        <option>Female</option>
                                        <option>Other</option>
                                    </select>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700">Country</label>
                                    <input type="text" name="country" required
                                        class="block w-full py-2 mt-1 border-gray-600 rounded-sm shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm">
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700">County</label>
                                    <input type="text" name="county" required
                                        class="block w-full py-2 mt-1 border-gray-600 rounded-sm shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm">
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700">Role</label>
                                    <select name="role" required
                                        class="block w-full py-2 mt-1 border-gray-600 rounded-sm shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm">
                                        <option value="">Select Role...</option>
                                        <option>
                                            Super Admin
                                        </option>
                                        <option>
                                            Ei
                                        </option>
                                    </select>
                                </div>

                                <!-- Email -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">Email Address</label>
                                    <input type="email" name="email" required
                                        class="block w-full py-2 mt-1 border-gray-600 rounded-sm shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm">
                                </div>

                            </div>
                            <!-- Submit -->
                            <div class="pt-4">
                                <button type="submit"
                                    class="w-full px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-1">
                                    Create User
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>


        <div id="kenyaMap" class="fade fade-up h-[450px] sm:h-[550px] z-0 w-full ">
        </div>

        <div class="max-w-full p-8 mx-auto">
            <div class="p-6 mb-6 bg-white rounded-lg shadow-md fade fade-up">
                <h2 class="flex items-center mb-5 text-2xl font-light text-gray-900 uppercase fade fade-left">
                    Stakeholders Overview
                </h2>
                <div class="flex flex-col gap-2">
                    <!-- <label class="text-sm font-medium text-gray-700">Status:</label>
                    <div class="flex flex-wrap gap-2">
                        <button onclick="highlightMarkers('all')"
                            class="px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-blue-500">
                            Show All
                        </button>
                        <button onclick="highlightMarkers('active')"
                            class="px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-green-100 focus:outline-none focus:ring-2 focus:ring-green-500">
                            Active
                        </button>
                        <button onclick="highlightMarkers('pending')"
                            class="px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-500">
                            Pending
                        </button>
                        <button onclick="highlightMarkers('stalled')"
                            class="px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-red-500">
                            Stalled
                        </button>
                        <button onclick="highlightMarkers('completed')"
                            class="px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-purple-100 focus:outline-none focus:ring-2 focus:ring-purple-500">
                            Completed
                        </button>
                    </div>
                </div> -->

                    <ul class="grid grid-cols-2 gap-4 mb-6 text-center lg:grid-cols-5" id="pills-tab" role="tablist"
                        data-twe-nav-ref>
                        <li class="flex" role="presentation">
                            <a class="fade w-full fade-up bg-green-50 transition ease-in-out duration-150 text-green-700 data-[twe-nav-active]:bg-green-900 data-[twe-nav-active]:text-white p-4 rounded-md"
                                id="pills-home-tab" data-twe-toggle="pill" data-twe-target="#pills-home"
                                data-twe-nav-active role="tab" aria-controls="pills-home" aria-selected="true">
                                <p class="text-3xl font-bold">800</p>
                                <p class="text-sm">Active</p>
                            </a>
                        </li>
                        <li class="flex" role="presentation">
                            <a class="fade w-full fade-up bg-yellow-50 transition ease-in-out duration-150 text-yellow-700 data-[twe-nav-active]:bg-yellow-900 data-[twe-nav-active]:text-white p-4 rounded-md"
                                id="pills-profile-tab" data-twe-toggle="pill" data-twe-target="#pills-profile"
                                role="tab">
                                <p class="text-3xl font-bold">200</p>
                                <p class="text-sm">Pending</p>
                            </a>
                        </li>
                        <li class="flex" role="presentation">
                            <a class="fade w-full fade-up bg-red-50 transition ease-in-out duration-150 text-red-700 data-[twe-nav-active]:bg-red-900 data-[twe-nav-active]:text-white p-4 rounded-md"
                                id="pills-contact-tab" data-twe-toggle="pill" data-twe-target="#pills-contact"
                                role="tab">
                                <p class="text-3xl font-bold">150</p>
                                <p class="text-sm">Restricted</p>
                            </a>
                        </li>
                        <li class="flex" role="presentation">
                            <a class="fade w-full fade-up bg-blue-50 transition ease-in-out duration-150 text-blue-700 data-[twe-nav-active]:bg-blue-900 data-[twe-nav-active]:text-white p-4 rounded-md"
                                id="pills-new-tab" data-twe-toggle="pill" data-twe-target="#pills-new" role="tab">
                                <p class="text-3xl font-bold"><i class="fad fa-plus"></i></p>
                                <p class="text-sm">New Member</p>
                            </a>
                        </li>
                    </ul>
                    <!--Pills content-->
                    <div class="mb-6">
                        <div class="hidden px-4 opacity-100 transition-opacity duration-150 ease-linear data-[twe-tab-active]:block"
                            id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab" data-twe-tab-active>
                            <div class="px-4 py-4 -mx-4 overflow-x-auto md:px-0 sm:-mx-4">
                                <div class="inline-block min-w-full overflow-hidden rounded-lg">
                                    <table class="min-w-full leading-normal">
                                        <thead>
                                            <tr>
                                                <th scope="col"
                                                    class="px-4 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase">
                                                    Full Name
                                                </th>
                                                <th scope="col"
                                                    class="px-4 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase">
                                                    Email Address
                                                </th>
                                                <th scope="col"
                                                    class="px-4 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase">
                                                    Organization
                                                </th>
                                                <th scope="col"
                                                    class="px-4 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase">
                                                    Role / Title
                                                </th>
                                                <th scope="col"
                                                    class="px-4 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase">
                                                    Actions
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="fade fade-up">
                                                <td class="px-4 py-3 text-sm text-gray-700 fade whitespace-nowrap">

                                                </td>
                                                <td class="px-4 py-3 text-sm text-gray-700 fade whitespace-nowrap">

                                                </td>
                                                <td class="px-4 py-3 text-sm text-gray-700 fade whitespace-nowrap">

                                                </td>
                                                <td class="px-4 py-3 text-sm text-gray-700 fade whitespace-nowrap">

                                                </td>
                                                <td
                                                    class="flex flex-wrap items-center gap-2 px-4 py-3 text-sm font-medium fade whitespace-nowrap">
                                                    <button
                                                        class="px-2 py-1 text-xs text-white bg-orange-500 rounded hover:bg-orage-600">
                                                        Suspend
                                                    </button>
                                                    <button
                                                        class="px-2 py-1 text-xs text-white bg-red-500 rounded hover:bg-red-600">
                                                        Restrict
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="hidden opacity-0 transition-opacity duration-150 ease-linear data-[twe-tab-active]:block"
                            id="pills-new" role="tabpanel" aria-labelledby="pills-new-tab">
                            <div class="max-w-6xl mx-auto">
                                <h2 class="mb-6 text-2xl font-semibold text-center text-gray-700">Create Account
                                </h2>

                                <form id="registerForm" onsubmit="return validateBeforeSubmit()"
                                    class="grid grid-cols-1 gap-6 md:grid-cols-2">
                                    <div>
                                        <label class="block mb-1 text-sm font-medium">Full Name</label>
                                        <input type="text" placeholder="John Doe"
                                            class="w-full px-4 py-2 border rounded-md bg-gray-50">
                                    </div>
                                    <div>
                                        <label class="block mb-1 text-sm font-medium">Email Address</label>
                                        <input type="email" placeholder="email@example.com"
                                            class="w-full px-4 py-2 border rounded-md bg-gray-50">
                                    </div>
                                    <div>
                                        <label class="block mb-1 text-sm font-medium">Organization</label>
                                        <input type="text" placeholder="Company or School"
                                            class="w-full px-4 py-2 border rounded-md bg-gray-50">
                                    </div>
                                    <div>
                                        <label class="block mb-1 text-sm font-medium">Role / Title</label>
                                        <input type="text" placeholder="e.g. Marketing Manager"
                                            class="w-full px-4 py-2 border rounded-md bg-gray-50">
                                    </div>


                                    <div class="grid grid-cols-2 gap-4 mt-6 space-x-4 md:col-span-2">
                                        <button type="submit"
                                            class="px-6 py-2 font-bold text-white bg-blue-600 rounded hover:bg-blue-700">Create
                                            Account</button>
                                        <button type="button" onclick="hideRegister()"
                                            class="px-6 py-2 text-blue-600 rounded bg-gray-50 hover:underline">Already
                                            have an
                                            account?</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div class="hidden opacity-0 transition-opacity duration-150 ease-linear data-[twe-tab-active]:block"
                            id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
                            <div class="px-4 py-4 -mx-4 overflow-x-auto md:px-0 sm:-mx-4">
                                <div class="inline-block min-w-full overflow-hidden rounded-lg">
                                    <table class="min-w-full leading-normal">
                                        <thead>
                                            <tr>
                                                <th scope="col"
                                                    class="px-4 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase">
                                                    Full Name
                                                </th>
                                                <th scope="col"
                                                    class="px-4 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase">
                                                    Email Address
                                                </th>
                                                <th scope="col"
                                                    class="px-4 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase">
                                                    Organization
                                                </th>
                                                <th scope="col"
                                                    class="px-4 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase">
                                                    Role / Title
                                                </th>
                                                <th scope="col"
                                                    class="px-4 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase">
                                                    Actions
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="fade fade-up">
                                                <td class="px-4 py-3 text-sm text-gray-700 fade whitespace-nowrap">

                                                </td>
                                                <td class="px-4 py-3 text-sm text-gray-700 fade whitespace-nowrap">

                                                </td>
                                                <td class="px-4 py-3 text-sm text-gray-700 fade whitespace-nowrap">

                                                </td>
                                                <td class="px-4 py-3 text-sm text-gray-700 fade whitespace-nowrap">

                                                </td>
                                                <td
                                                    class="flex flex-wrap items-center gap-2 px-4 py-3 text-sm font-medium fade whitespace-nowrap">
                                                    <button
                                                        class="px-2 py-1 text-xs text-white bg-green-500 rounded hover:bg-green-600">
                                                        Approve
                                                    </button>
                                                    <button
                                                        class="px-2 py-1 text-xs text-white bg-red-500 rounded hover:bg-red-600">
                                                        Restrict
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="hidden opacity-0 transition-opacity duration-150 ease-linear data-[twe-tab-active]:block"
                            id="pills-contact" role="tabpanel" aria-labelledby="pills-contact-tab">
                            <div class="px-4 py-4 -mx-4 overflow-x-auto md:px-0 sm:-mx-4">
                                <div class="inline-block min-w-full overflow-hidden rounded-lg">
                                    <table class="min-w-full leading-normal">
                                        <thead>
                                            <tr>
                                                <th scope="col"
                                                    class="px-4 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase">
                                                    Full Name
                                                </th>
                                                <th scope="col"
                                                    class="px-4 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase">
                                                    Email Address
                                                </th>
                                                <th scope="col"
                                                    class="px-4 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase">
                                                    Organization
                                                </th>
                                                <th scope="col"
                                                    class="px-4 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase">
                                                    Role / Title
                                                </th>
                                                <th scope="col"
                                                    class="px-4 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase">
                                                    Actions
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="fade fade-up">
                                                <td class="px-4 py-3 text-sm text-gray-700 fade whitespace-nowrap">

                                                </td>
                                                <td class="px-4 py-3 text-sm text-gray-700 fade whitespace-nowrap">

                                                </td>
                                                <td class="px-4 py-3 text-sm text-gray-700 fade whitespace-nowrap">

                                                </td>
                                                <td class="px-4 py-3 text-sm text-gray-700 fade whitespace-nowrap">

                                                </td>
                                                <td
                                                    class="flex flex-wrap items-center gap-2 px-4 py-3 text-sm font-medium fade whitespace-nowrap">
                                                    <button
                                                        class="px-2 py-1 text-xs text-white bg-orange-500 rounded hover:bg-orage-600">
                                                        Restore
                                                    </button>
                                                    <button
                                                        class="px-2 py-1 text-xs text-white bg-red-500 rounded hover:bg-red-600">
                                                        Terminate
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <script src="styles/effects.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tw-elements/js/tw-elements.umd.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        let map, heatLayer;
        let projects = [];
        let filteredProjects = [];
        let sortBy = 'name';
        let sortOrder = 'asc';
        let currentPage = 1;
        const itemsPerPage = 5;
        let currentFilter = 'all';
        let searchQuery = '';
        let dateRangeFrom = null;
        let dateRangeTo = null;


        const markers = [];
        const icons = {
            default: (tag) => L.icon({ iconUrl: `/frontend/resources/${tag}.png`, iconSize: [20, 20] }),
            selected: (tag) => L.icon({ iconUrl: `/frontend/resources/${tag}.png`, iconSize: [40, 40] })
        };

        const bgColors = {
            active: 'bg-green-50',
            pending: 'bg-yellow-50',
            stalled: 'bg-red-50',
            completed: 'bg-cyan-100',
            default: 'bg-white'
        };

        const statusBadge = (tag) => {
            return {
                active: 'bg-green-200 text-green-800',
                pending: 'bg-yellow-200 text-yellow-800',
                stalled: 'bg-red-200 text-red-800',
                completed: 'bg-cyan-300 text-gray-800',
            }[tag] || 'bg-gray-200 text-gray-800';
        };



        document.addEventListener("DOMContentLoaded", function () {
            map = L.map('kenyaMap', {
                center: [-0.0236, 37.9062],
                zoom: 6.3,
                scrollWheelZoom: false,
                dragging: true,
                touchZoom: false,
                doubleClickZoom: true,
                boxZoom: false,
                keyboard: false,
                zoomControl: true // keeps the + / – buttons visible
            });

            var kenyaBounds = [
                [-4.677504, 33.893568],  // Southwest corner (Lat, Lng)
                [5.019938, 41.906895]    // Northeast corner (Lat, Lng)
            ];

            // Set initial view to Kenya
            map.fitBounds(kenyaBounds);

            // Add tile layer
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 22,
                attribution: '&copy; OpenStreetMap contributors'
            }).addTo(map);

            // Restrict map so user cannot pan outside Kenya
            map.setMaxBounds(kenyaBounds);
            map.on('drag', function () {
                map.panInsideBounds(kenyaBounds, { animate: false });
            });

            // This comes from the db  -->
            const markerData = [
                { lat: -1.2921, lng: 36.8219, name: "Project 1", tag: "active" },
                { lat: -0.1023, lng: 34.7619, name: "Project 2", tag: "pending" },
                { lat: 0.3256, lng: 37.1231, name: "Project 3", tag: "stalled" },
                { lat: -1.1504, lng: 36.8907, name: "Project 4", tag: "completed" },
            ];

            // This comes from db-- >
            markerData.forEach((data) => {
                const fullDescription = `Loin ipsum dolor sit amet, leo in savanna stride, rugitus magna echoing plains. 
                    Praeterea mane hunters vigilant, acacia shade sub arbore. Serengeti felis aurum, 
                    crinibus ventis fluctuantibus, prideland auctor sapien. Ungulae zebrae cursitant, 
                    antelopae metu per campos. Territorium regale defenditur, solis ardor fulget super 
                    juba. Luna sub nocte vigil, oculi flammae micantes, silentium ruptum rugitu ${data.name}`;

                data.description = fullDescription.substring(0, 300) + "...";
                data.fullDescription = fullDescription;
                data.region = `Region ${Math.ceil(Math.random() * 10)}`;
                data.budget = `${(Math.random() * 100 + 10).toFixed(2)} million KES`;
                data.team = `${Math.ceil(Math.random() * 15 + 5)} members`;
                data.sponsor = `Sponsor for ${data.name}`;
                data.participants = Math.ceil(Math.random() * 100);
                data.start_date = new Date(Date.now() - Math.random() * 10000000000).toISOString();
                data.status = data.tag;

                const marker = L.marker([data.lat, data.lng], { icon: icons.default(data.tag) })
                    .addTo(map)
                    .bindTooltip(data.name)
                    .on("click", function () {
                        if (selectedMarker && selectedMarker !== this) {
                            selectedMarker.setIcon(icons.default(selectedMarker.tag));
                        }
                        this.setIcon(icons.selected(data.tag));
                        selectedMarker = this;
                        showProjectInfo(data);
                    });

                marker.data = data;
                marker.tag = data.tag;
                markers.push(marker);
            });


            highlightMarkers('all');

            document.getElementById('searchInput').addEventListener('input', (e) => {
                searchQuery = e.target.value.trim().toLowerCase();
                currentPage = 1;
                highlightMarkers(currentFilter);
            });

            document.getElementById('dateFrom').addEventListener('change', (e) => {
                dateRangeFrom = e.target.value ? new Date(e.target.value) : null;
                currentPage = 1;
                highlightMarkers(currentFilter);
            });

            document.getElementById('dateTo').addEventListener('change', (e) => {
                dateRangeTo = e.target.value ? new Date(e.target.value) : null;
                currentPage = 1;
                highlightMarkers(currentFilter);
            });

            document.getElementById('sortSelect').addEventListener('change', (e) => {
                sortProjects(e.target.value);
            });
        });
        // Comes From DB
        function showProjectInfo(project) {
            const infoBox = document.getElementById("projectInfo");
            infoBox.classList.remove("hidden");
            infoBox.innerHTML = `
            <div class="flex flex-wrap">
                <h3 class="mb-4 text-xl font-bold text-gray-800">${project.name}</h3>
                <p><strong>Description:</strong> ${project.description}</p>
                <p><strong>Region:</strong> ${project.region}</p>
                <p><strong>Budget:</strong> ${project.budget}</p>
                <p><strong>Team:</strong> ${project.team}</p>
                <p><strong>Participants:</strong> ${project.participants}</p>
                <p><strong>Sponsor:</strong> ${project.sponsor}</p>
                <p><strong>Start Date:</strong> ${new Date(project.start_date).toLocaleDateString()}</p>
                <p><strong>Status:</strong> <span class="inline-block px-2 py-1 rounded-full text-sm font-medium ${statusBadge(project.status)}">${project.status}</span></p>
            </div>
        `;
        }

        function focusMarker(index) {
            const marker = markers[index];
            map.setView(marker.getLatLng(), 9);
            marker.fire('click');
            document.getElementById('localMap').scrollIntoView({ behavior: 'smooth' });
        }

        function sortProjects(field) {
            if (sortBy === field) {
                sortOrder = sortOrder === 'asc' ? 'desc' : 'asc';
            } else {
                sortBy = field;
                sortOrder = 'asc';
            }
            currentPage = 1;
            highlightMarkers(currentFilter);
        }

        function highlightMarkers(tag) {
            currentFilter = tag;
            const accordion = document.getElementById("projectAccordion");
            const infoBox = document.getElementById("projectInfo");
            infoBox.classList.add("hidden");
            accordion.innerHTML = '';
            accordion.classList.remove("hidden");
            accordion.classList.add("opacity-0", "translate-y-4");

            let filteredMarkers = markers.filter(marker => {
                const p = marker.data;
                if (tag !== 'all' && marker.tag !== tag) return false;
                if (searchQuery && !p.name.toLowerCase().includes(searchQuery)) return false;
                const pDate = new Date(p.start_date);
                if (dateRangeFrom && pDate < dateRangeFrom) return false;
                if (dateRangeTo && pDate > dateRangeTo) return false;
                return true;
            });

            filteredMarkers.sort((a, b) => {
                const aVal = sortBy === 'name' ? a.data.name : new Date(a.data.start_date);
                const bVal = sortBy === 'name' ? b.data.name : new Date(b.data.start_date);
                return sortOrder === 'asc' ? (aVal > bVal ? 1 : -1) : (aVal < bVal ? 1 : -1);
            });

            const totalPages = Math.ceil(filteredMarkers.length / itemsPerPage);
            const paginated = filteredMarkers.slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage);
            updatePaginationControls(totalPages);

            markers.forEach(marker => {
                marker.setOpacity(filteredMarkers.includes(marker) ? 1 : 0.1);
            });

            setTimeout(() => accordion.classList.remove("opacity-0", "translate-y-4"), 10);

            paginated.forEach((marker, idx) => {
                const i = markers.indexOf(marker);
                const project = marker.data;
                const bg = bgColors[project.status] || bgColors.default;

                const item = document.createElement("div");
                item.className = `rounded shadow-sm ${bg}`;

                item.innerHTML = `
                    <button class="w-full px-6 py-4 text-left border-b focus:outline-none" data-toggle="collapse-${i}">
                        <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center">
                            <div>
                                <h4 class="text-lg font-semibold text-gray-800">${project.name}</h4>
                                <p id="desc-${i}" class="mt-2 text-sm text-gray-600">${project.description}</p>
                            </div>
                            <div class="flex items-center mt-2 text-sm font-semibold tracking-wider text-gray-500 sm:mt-0">
                                ${new Date(project.start_date).toLocaleDateString()}
                            </div>
                        </div>
                    </button>
                    <div id="collapse-${i}" class="hidden px-6 py-4 bg-white">
                        <p><strong>Region:</strong> ${project.region}</p>
                        <p><strong>Budget:</strong> ${project.budget}</p>
                        <p><strong>Team:</strong> ${project.team}</p>
                        <p><strong>Participants:</strong> ${project.participants}</p>
                        <p><strong>Sponsor:</strong> ${project.sponsor}</p>
                        <p><strong>Status:</strong> 
                            <span class="inline-block px-2 py-1 rounded-full text-sm font-medium ${statusBadge(project.status)}">
                                ${project.status}
                            </span>
                        </p>
                        <button onclick="focusMarker(${i})" class="px-5 py-2 mt-3 text-sm font-semibold text-white transition bg-blue-600 rounded hover:bg-blue-700 hover:scale-105">
                            Show on Map
                        </button>
                    </div>
                `;

                accordion.appendChild(item);

                // Toggle description between truncated and full
                const btn = item.querySelector(`[data-toggle="collapse-${i}"]`);
                btn.addEventListener("click", () => {
                    const collapse = document.getElementById(`collapse-${i}`);
                    const desc = document.getElementById(`desc-${i}`);
                    collapse.classList.toggle("hidden");

                    if (!collapse.classList.contains("hidden")) {
                        desc.textContent = project.fullDescription; // expand
                    } else {
                        desc.textContent = project.description; // truncate
                    }
                });
            });

        }

        function updatePaginationControls(totalPages) {
            const container = document.getElementById("paginationControls");
            container.innerHTML = '';
            for (let i = 1; i <= totalPages; i++) {
                const btn = document.createElement("button");
                btn.textContent = i;
                btn.className = `px-3 py-1 rounded ${i === currentPage ? 'bg-blue-600 text-white' : 'bg-gray-100 text-gray-800 hover:bg-gray-200'}`;
                btn.onclick = () => {
                    currentPage = i;
                    highlightMarkers(currentFilter);
                };
                container.appendChild(btn);
            }
        }

        function exportCSV() {
            const headers = ['Name', 'Description', 'Region', 'Budget', 'Team', 'Participants', 'Sponsor', 'Start Date', 'Status'];
            const rows = markers
                .map(m => m.data)
                .filter(p => {
                    if (searchQuery && !p.name.toLowerCase().includes(searchQuery)) return false;
                    const date = new Date(p.start_date);
                    if (dateRangeFrom && date < dateRangeFrom) return false;
                    if (dateRangeTo && date > dateRangeTo) return false;
                    if (currentFilter !== 'all' && p.status !== currentFilter) return false;
                    return true;
                })
                .map(p => [
                    p.name, p.description, p.region, p.budget, p.team, p.participants,
                    p.sponsor, new Date(p.start_date).toLocaleDateString(), p.status
                ]);

            let csvContent = [headers.join(',')];
            rows.forEach(r => csvContent.push(r.map(field => `"${field}"`).join(',')));

            const blob = new Blob([csvContent.join('\n')], { type: 'text/csv' });
            const link = document.createElement("a");
            link.href = URL.createObjectURL(blob);
            link.download = `projects_${new Date().toISOString().split('T')[0]}.csv`;
            link.click();
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/tw-elements/js/tw-elements.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.js"></script>
    <!-- Leaflet JS -->


</body>

</html>