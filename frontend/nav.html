<nav x-data="{ open: false }"
    class="fixed z-50 border shadow-sm bg-white/70 top-4 left-4 right-4 backdrop-blur-md border-white/10 rounded-xl">
    <div class="flex items-center justify-between px-6">
        <!-- Logo -->
        <a href="index.html"
            class="flex items-center justify-center space-x-2 py-1 text-2xl font-bold text-teal-700 uppercase">
            <img src="resources/images/logo.png" class="object-contain h-[4rem] lg:h-[5rem]" alt="RMNCAH Logo" />
            <img src="resources/images/gov.png" class="rounded-lg h-[4rem] lg:h-[5rem]">
        </a>

        <!-- Mobile hamburger -->
        <button @click="open = !open" class="text-xl lg:hidden focus:outline-none text-gray-600 hover:text-gray-800">
            <i class="fas fa-bars" x-show="!open"></i>
            <i class="fas fa-times" x-show="open" x-cloak></i>
        </button>

        <!-- Desktop - Main Nav Links -->
        <ul class="items-center hidden space-x-8 text-sm font-medium text-gray-800 lg:flex">
            <li>
                <a href="index.html" class="uppercase transition hover:text-lime-600">Home</a>
            </li>

            <!-- Projects Dropdown -->
            <li x-data="{ showprojectDropdown: false }" class="relative">
                <button @click="showprojectDropdown = !showprojectDropdown"
                    class="font-medium inline-flex items-center uppercase transition hover:text-lime-600">
                    Projects <i class="ml-2 fas fa-chevron-down"></i>
                </button>
                <div x-show="showprojectDropdown" @click.outside="showprojectDropdown = false" x-transition
                    class="absolute z-50 w-64 mt-2 bg-white/90 backdrop-blur-md divide-y divide-gray-100 shadow-md rounded-xl">
                    <ul class="py-2 text-sm text-left text-teal-800">
                        <li class="px-4 py-2 hover:bg-lime-50 text-[12px] uppercase">
                            <a href="new-project.html">
                                <i class="fas fa-plus mr-2 text-emerald-500"></i> New Project
                            </a>
                        </li>
                        <li class="px-4 py-2 hover:bg-lime-50 text-[12px] uppercase">
                            <a href="projects.html#my-projects">
                                <i class="fas fa-user-check mr-2 text-sky-500"></i> My Projects
                            </a>
                        </li>
                        <li class="px-4 py-2 hover:bg-lime-50 text-[12px] uppercase">
                            <a href="past-projects.html">
                                <i class="fas fa-clock-rotate-left mr-2 text-gray-500"></i> Past Projects
                            </a>
                        </li>
                    </ul>
                </div>
            </li>

            <!-- Collaborations Dropdown -->
            <li x-data="{ collabDropdown: false }" class="relative">
                <button @click="collabDropdown = !collabDropdown"
                    class="font-medium inline-flex items-center uppercase transition hover:text-lime-600">
                    Collaborations <i class="ml-2 fas fa-chevron-down"></i>
                </button>
                <div x-show="collabDropdown" @click.outside="collabDropdown = false" x-transition
                    class="absolute z-50 w-64 mt-2 bg-white divide-y divide-gray-100 shadow-md rounded-xl">
                    <ul class="py-2 text-sm text-left text-teal-700">
                        <li class="px-4 py-2 hover:bg-lime-50 text-[12px] uppercase">
                            <a href="priorities.html">
                                <i class="far fa-star mr-2 text-orange-600"></i> RMNCAH Priorities
                            </a>
                        </li>
                        <li class="px-4 py-2 hover:bg-lime-50 text-[12px] uppercase">
                            <a href="my-collaborations.html">
                                <i class="fas fa-users mr-2 text-fuchsia-600"></i> My Collaborations
                            </a>
                        </li>
                        <li class="px-4 py-2 hover:bg-lime-50 text-[12px] uppercase">
                            <a href="announcements.html">
                                <i class="fas fa-magnifying-glass mr-2 text-cyan-500"></i> Find Projects
                            </a>
                        </li>
                    </ul>
                </div>
            </li>

            <li>
                <a href="general-announcements.html"
                    class="font-medium inline-flex items-center uppercase transition hover:text-lime-600">
                    Announcements
                </a>
            </li>
        </ul>

        <!-- Desktop - Right-aligned Items -->
        <ul class="flex items-center space-x-4 text-sm hidden lg:flex font-medium text-gray-800">

            <!-- Dashboard quick link -->
            <li>
                <a href="dashboard.html"
                    class="font-medium inline-flex items-center gap-2 px-3 py-2 uppercase transition rounded-lg hover:bg-gray-100 hover:text-lime-600">
                    <i class="fas fa-gauge-high text-lime-500"></i> Dashboard
                </a>
            </li>

            <!-- Admin Dropdown (hidden until role is checked) -->
            <li x-data="{ showDropdown: false }" class="relative hidden" id="adminNav">
                <button @click="showDropdown = !showDropdown"
                    class="font-medium inline-flex items-center gap-2 px-3 py-2 uppercase transition rounded-lg hover:bg-gray-100 hover:text-lime-600">
                    <i class="fas fa-shield-halved text-lime-500"></i> Admin
                    <i class="fas fa-chevron-down text-xs"></i>
                </button>
                <div x-show="showDropdown" @click.outside="showDropdown = false" x-transition
                    class="absolute right-0 z-50 w-64 mt-2 bg-white divide-y divide-gray-100 shadow-md rounded-xl">
                    <ul class="py-2 text-sm text-left text-teal-700">
                        <li class="px-4 py-2 hover:bg-lime-50 text-[12px] uppercase">
                            <a href="projects.html">
                                <i class="far fa-folder mr-2 text-lime-500"></i> Project Management
                            </a>
                        </li>
                        <li class="px-4 py-2 hover:bg-lime-50 text-[12px] uppercase">
                            <a href="admin-approvals.html">
                                <i class="fas fa-list-check mr-2 text-lime-500"></i> Two-Tier Approvals
                            </a>
                        </li>
                        <li class="px-4 py-2 hover:bg-lime-50 text-[12px] uppercase">
                            <a href="members.html">
                                <i class="fas fa-users mr-2 text-lime-500"></i> Stakeholder Management
                            </a>
                        </li>
                        <li class="px-4 py-2 hover:bg-lime-50 text-[12px] uppercase">
                            <a href="donor-management.html">
                                <i class="fas fa-file-invoice mr-2 text-lime-500"></i> Donor Management
                            </a>
                        </li>
                    </ul>
                </div>
            </li>

            <!-- FAQ -->
            <li>
                <a href="faq.html"
                    class="inline-flex items-center gap-1 px-2 py-2 uppercase font-medium transition text-blue-700 hover:text-blue-900 rounded-lg hover:bg-blue-50"
                    title="FAQ">
                    <i class="far fa-circle-question text-lg"></i>
                </a>
            </li>

            <!-- User Dropdown -->
            <li x-data="{ showUserDropdown: false }" class="relative">
                <button @click="showUserDropdown = !showUserDropdown"
                    class="font-medium uppercase inline-flex items-center gap-2 px-3 py-2 text-sm transition rounded-lg hover:bg-gray-100">
                    <i class="fas fa-circle-user text-teal-600"></i>
                    <span id="userDisplayName">User</span>
                    <i class="fas fa-chevron-down text-xs text-gray-500"></i>
                </button>
                <div x-show="showUserDropdown" @click.outside="showUserDropdown = false" x-transition
                    class="absolute right-0 z-50 w-64 mt-2 bg-white divide-y divide-gray-100 shadow-lg rounded-xl">
                    <div class="px-4 py-3">
                        <div class="text-base font-medium text-teal-900" id="userNameDisplay">Loading...</div>
                        <div class="text-sm text-slate-500" id="userEmailDisplay"></div>
                        <div class="text-xs text-slate-400 mt-1">
                            Role: <span id="userRoleDisplay" class="font-medium text-teal-600"></span>
                            &nbsp;|&nbsp;
                            Status: <span id="userStatusDisplay" class="font-medium text-lime-500"></span>
                        </div>
                    </div>
                    <ul class="py-2 text-sm text-teal-700">
                        <li>
                            <a href="profile.html" class="block px-4 py-2 hover:bg-lime-50 hover:text-lime-600">
                                <i class="mr-2 far fa-user"></i> Profile
                            </a>
                        </li>
                        <li>
                            <a href="settings.html" class="block px-4 py-2 hover:bg-lime-50 hover:text-lime-600">
                                <i class="mr-2 fas fa-gear"></i> Settings
                            </a>
                        </li>
                        <li id="donorNav" class="hidden">
                            <a href="donor-management.html"
                                class="block px-4 py-2 hover:bg-lime-50 hover:text-lime-600">
                                <i class="mr-2 fas fa-hand-holding-heart"></i> Donor Management
                            </a>
                        </li>
                    </ul>
                    <div class="py-2">
                        <button onclick="authManager.logout()"
                            class="block w-full px-4 py-2 text-left text-sm text-red-700 hover:bg-red-100">
                            <i class="mr-2 fas fa-right-from-bracket"></i> Logout
                        </button>
                    </div>
                </div>
            </li>
        </ul>
    </div>

    <!-- Mobile Nav -->
    <div x-show="open" x-transition:enter="transition ease-out duration-200"
        x-transition:enter-start="opacity-0 transform -translate-y-2"
        x-transition:enter-end="opacity-100 transform translate-y-0"
        x-transition:leave="transition ease-in duration-150"
        x-transition:leave-start="opacity-100 transform translate-y-0"
        x-transition:leave-end="opacity-0 transform -translate-y-2" class="px-6 pb-6 lg:hidden">
        <ul class="items-center text-sm gap-3 grid font-medium text-gray-800">

            <li>
                <a href="index.html" class="uppercase transition hover:text-lime-600">Home</a>
            </li>

            <!-- Projects Dropdown -->
            <li x-data="{ showprojectDropdown: false }" class="relative">
                <button @click="showprojectDropdown = !showprojectDropdown"
                    class="font-medium inline-flex items-center uppercase transition hover:text-lime-600">
                    Projects <i class="ml-2 fas fa-chevron-down"></i>
                </button>
                <div x-show="showprojectDropdown" @click.outside="showprojectDropdown = false" x-transition
                    class="absolute z-50 w-64 mt-2 bg-white/90 backdrop-blur-md divide-y divide-gray-100 shadow-md rounded-xl">
                    <ul class="py-2 text-sm text-left text-teal-800">
                        <li class="px-4 py-2 hover:bg-lime-50 text-[12px] uppercase">
                            <a href="new-project.html">
                                <i class="fas fa-plus mr-2 text-emerald-500"></i> New Project
                            </a>
                        </li>
                        <li class="px-4 py-2 hover:bg-lime-50 text-[12px] uppercase">
                            <a href="projects.html#my-projects">
                                <i class="fas fa-user-check mr-2 text-sky-500"></i> My Projects
                            </a>
                        </li>
                        <li class="px-4 py-2 hover:bg-lime-50 text-[12px] uppercase">
                            <a href="past-projects.html">
                                <i class="fas fa-clock-rotate-left mr-2 text-gray-500"></i> Past Projects
                            </a>
                        </li>
                    </ul>
                </div>
            </li>

            <!-- Collaborations Dropdown -->
            <li x-data="{ collabDropdown: false }" class="relative">
                <button @click="collabDropdown = !collabDropdown"
                    class="font-medium inline-flex items-center uppercase transition hover:text-lime-600">
                    Collaborations <i class="ml-2 fas fa-chevron-down"></i>
                </button>
                <div x-show="collabDropdown" @click.outside="collabDropdown = false" x-transition
                    class="absolute z-50 w-64 mt-2 bg-white divide-y divide-gray-100 shadow-md rounded-xl">
                    <ul class="py-2 text-sm text-left text-teal-700">
                        <li class="px-4 py-2 hover:bg-lime-50 text-[12px] uppercase">
                            <a href="priorities.html">
                                <i class="far fa-star mr-2 text-orange-600"></i> RMNCAH Priorities
                            </a>
                        </li>
                        <li class="px-4 py-2 hover:bg-lime-50 text-[12px] uppercase">
                            <a href="my-collaborations.html">
                                <i class="fas fa-users mr-2 text-fuchsia-600"></i> My Collaborations
                            </a>
                        </li>
                        <li class="px-4 py-2 hover:bg-lime-50 text-[12px] uppercase">
                            <a href="announcements.html">
                                <i class="fas fa-magnifying-glass mr-2 text-cyan-500"></i> Find Projects
                            </a>
                        </li>
                    </ul>
                </div>
            </li>

            <li>
                <a href="general-announcements.html" class="uppercase transition hover:text-indigo-600">
                    <i class="fas fa-bullhorn mr-2 text-indigo-500"></i> Announcements
                </a>
            </li>

            <li>
                <a href="dashboard.html" class="uppercase transition hover:text-lime-600">
                    <i class="fas fa-gauge-high mr-2 text-lime-500"></i> Dashboard
                </a>
            </li>

            <!-- Dashboard Sidebar Tabs - Only show on dashboard page -->
            <li id="mobile-dashboard-tabs" class="hidden">
                <div class="border-t border-gray-200 pt-3 mt-1">
                    <h4 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3">Dashboard Sections</h4>
                    <div class="grid gap-2" id="mobile-sidebar-tabs">
                        <!-- Dashboard tabs injected by dashboard-tabs.js -->
                    </div>
                </div>
            </li>

            <!-- Admin Dropdown (hidden until role is checked) -->
            <li x-data="{ showDropdown: false }" class="relative hidden" id="adminNav">
                <button @click="showDropdown = !showDropdown"
                    class="font-medium inline-flex items-center uppercase transition hover:text-lime-600">
                    <i class="fas fa-shield-halved mr-2 text-lime-500"></i> Admin
                    <i class="ml-2 fas fa-chevron-down"></i>
                </button>
                <div x-show="showDropdown" @click.outside="showDropdown = false" x-transition
                    class="absolute z-50 w-64 mt-2 bg-white divide-y divide-gray-100 shadow-md rounded-xl">
                    <ul class="py-2 text-sm text-left text-teal-700">
                        <li class="px-4 py-2 hover:bg-lime-50 text-[12px] uppercase">
                            <a href="projects.html">
                                <i class="far fa-folder mr-2 text-blue-500"></i> Project Management
                            </a>
                        </li>
                        <li class="px-4 py-2 hover:bg-lime-50 text-[12px] uppercase">
                            <a href="admin-approvals.html">
                                <i class="fas fa-list-check mr-2 text-blue-500"></i> Two-Tier Approvals
                            </a>
                        </li>
                        <li class="px-4 py-2 hover:bg-lime-50 text-[12px] uppercase">
                            <a href="members.html">
                                <i class="fas fa-users mr-2 text-blue-500"></i> Stakeholder Management
                            </a>
                        </li>
                        <li class="px-4 py-2 hover:bg-lime-50 text-[12px] uppercase">
                            <a href="donor-management.html">
                                <i class="fas fa-file-invoice mr-2 text-blue-500"></i> Donor Management
                            </a>
                        </li>
                    </ul>
                </div>
            </li>

            <!-- User Dropdown -->
            <li x-data="{ showUserDropdown: false }" class="relative">
                <button @click="showUserDropdown = !showUserDropdown"
                    class="font-medium uppercase inline-flex items-center text-sm transition rounded-lg hover:bg-gray-100">
                    <i class="mr-2 fas fa-circle-user text-teal-600"></i>
                    <span id="userDisplayName">User</span>
                    <i class="ml-2 fas fa-chevron-down text-xs text-gray-500"></i>
                </button>
                <div x-show="showUserDropdown" @click.outside="showUserDropdown = false" x-transition
                    class="absolute right-0 z-50 w-64 mt-2 bg-white divide-y divide-gray-100 shadow-lg rounded-xl">
                    <div class="px-4 py-3">
                        <div class="text-base font-medium text-teal-900" id="userNameDisplay">Loading...</div>
                        <div class="text-sm text-slate-500" id="userEmailDisplay"></div>
                        <div class="text-xs text-slate-400 mt-1">
                            Role: <span id="userRoleDisplay" class="font-medium text-teal-600"></span>
                            &nbsp;|&nbsp;
                            Status: <span id="userStatusDisplay" class="font-medium text-lime-500"></span>
                        </div>
                    </div>
                    <ul class="py-2 text-sm text-teal-700">
                        <li>
                            <a href="profile.html" class="block px-4 py-2 hover:bg-lime-50 hover:text-lime-600">
                                <i class="mr-2 far fa-user"></i> Profile
                            </a>
                        </li>
                        <li>
                            <a href="settings.html" class="block px-4 py-2 hover:bg-lime-50 hover:text-lime-600">
                                <i class="mr-2 fas fa-gear"></i> Settings
                            </a>
                        </li>
                        <li id="donorNav" class="hidden">
                            <a href="donor-management.html"
                                class="block px-4 py-2 hover:bg-lime-50 hover:text-lime-600">
                                <i class="mr-2 fas fa-hand-holding-heart"></i> Donor Management
                            </a>
                        </li>
                    </ul>
                    <div class="py-2">
                        <button onclick="authManager.logout()"
                            class="block w-full px-4 py-2 text-left text-sm text-red-700 hover:bg-red-100">
                            <i class="mr-2 fas fa-right-from-bracket"></i> Logout
                        </button>
                    </div>
                </div>
            </li>

            <li>
                <a href="faq.html" class="uppercase font-medium transition text-blue-800">
                    <i class="mr-2 far fa-circle-question"></i> FAQ's
                </a>
            </li>
        </ul>
    </div>
</nav>
